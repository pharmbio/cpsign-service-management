{
    "input": {
        "atom": {
            "glob": "/models",
            "repo": "hERG-train"
        }
    },
    "pipeline": {
        "name": "hERG-aggregate"
    },
    "resource_limits": {
        "cpu": 4,
        "memory": "8G"
    },
    "resource_requests": {
        "cpu": 1,
        "memory": "2G"
    },
    "standby": false,
    "transform": {
        "cmd": [
            "/bin/bash"
        ],
        "image": "pharmbio/cpsign-docker:c0.7.12",
        "secrets": [
            {
                "mount_path": "/mnt/lic/",
                "name": "cpsign-license"
            }
        ],
        "stdin": [
            "export folder=/pfs/hERG-train",
            "java -jar cpsign-0.7.12.jar fast-aggregate -m $(for split in $(ls $folder/models); do   echo $folder/models/$split; done) -mo /pfs/out/hERG-aggregated.jar --license /mnt/lic/license  > /pfs/out/stdout.txt"
        ]
    }
}
